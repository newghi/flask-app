<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìë™ì°¨ ì½”ë“œ ì£¼ë¬¸ ì‹œìŠ¤í…œ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}" />
  <style>
    .center-box {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 90vh;
    }

    .hidden {
      display: none !important;
    }

    .price-display {
      background: #e8f5e8;
      border: 1px solid #28a745;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
    }

    .price-amount {
      font-size: 1.5em;
      font-weight: bold;
      color: #28a745;
    }

    .payment-methods {
      margin: 20px 0;
    }

    .payment-method {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
    }

    .payment-method:hover {
      background-color: #f8f9fa;
    }

    .payment-method input[type="radio"] {
      margin-right: 10px;
    }

    .payment-info {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
    }

    select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      background-color: white;
    }

    select:focus {
      outline: none;
      border-color: #2563eb;
    }

    /* Modal Styles */
    .modal {
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background-color: #fefefe;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 90%;
      max-width: 500px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      position: relative;
    }

    .modal .close-btn {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .modal .close-btn:hover,
    .modal .close-btn:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .selected-product-item {
      border: 1px solid #eee;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #f9f9f9;
    }

    .selected-product-item .remove-btn {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .selected-product-item .remove-btn:hover {
      background-color: #c82333;
    }
  </style>
</head>

<body>
  <!--âœ… ë¡œê·¸ì¸ UI -->
  <div class="container" id="login-screen">
    <div class="card">
      <h2>ë¡œê·¸ì¸</h2>
      <form onsubmit="handleLogin(event)">
        <div class="form-group">
          <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required />
        </div>
        <div class="form-group">
          <input type="text" id="phone" placeholder="ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required />
        </div>
        <div class="form-group">
          <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required />
        </div>
        <button type="submit">ë¡œê·¸ì¸</button>
      </form>
    </div>
  </div>

  <!-- âœ… 'ìë™ì°¨ ë„ì¥ ì œí’ˆ ì£¼ë¬¸ì„œ' UI -->
  <div class="center-box hidden" id="order-step1">
    <div class="card main-form">
      <h2>ìë™ì°¨ ë„ì¥ ì œí’ˆ ì£¼ë¬¸ì„œ</h2>
      <form id="car-order-form" onsubmit="showAddressForm(event)">
        <div id="selected-products-container">
          <!-- ì„ íƒëœ ì œí’ˆë“¤ê³¼ ìš”ì²­ì‚¬í•­ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
        <button type="button" id="open-product-modal-btn" style="
              width: 100%;
              padding: 10px;
              margin-bottom: 15px;
              background-color: #007bff;
              color: white;
              border: none;
              border-radius: 8px;
              cursor: pointer;
            ">
          ì œí’ˆ ì¶”ê°€
        </button>

        <div class="price-display" id="price-display" style="display: none">
          <div>ì˜ˆìƒ ì´ ê¸ˆì•¡</div>
          <div class="price-amount" id="total-price">0ì›</div>
        </div>

        <div style="display: flex; justify-content: space-between; gap: 8px">
          <button type="button" onclick="goBackToLogin()">ë’¤ë¡œê°€ê¸°</button>
          <button type="submit">ë‹¤ìŒ</button>
        </div>
      </form>
    </div>
  </div>

  <!-- âœ… 'ì œí’ˆ ì„ íƒ' UI -->
  <div id="product-modal" class="modal hidden">
    <div class="modal-content card main-form">
      <h2>ì œí’ˆ ì„ íƒ</h2>
      <!-- ê³µì§€ ë°•ìŠ¤ ì¶”ê°€ -->
      <div
        style="background:#f8f9fa; border-left:4px solid #1976d2; padding:12px 16px; margin-bottom:24px; font-size:1.05em; color:#222;">
        <strong>ê³µì§€</strong><br>
        ì •ê¸°ì£¼ë¬¸ ë¦¬ìŠ¤íŠ¸ì— ì—†ëŠ” ì œí’ˆì´ ìˆì„ ê²½ìš° ìš”ì²­ì‚¬í•­ ë€ì— ì ì–´ì£¼ì„¸ìš”.
      </div>
      <!-- ì •ê¸°ì£¼ë¬¸ í’ˆëª© -->
      <div class="order-section">
        <h3>ì •ê¸°ì£¼ë¬¸ í’ˆëª©</h3>
        <div class="form-group">
          <label for="regular-item-select" class="form-label">í’ˆëª© ì„ íƒ</label>
          <select id="regular-item-select" class="form-input">
            <option value="">í’ˆëª©ì„ ì„ íƒí•˜ì„¸ìš”</option>
            <option value="íˆ¬ëª…">íˆ¬ëª…</option>
            <option value="ì„œí˜">ì„œí˜</option>
            <option value="ì„œí˜ í°ìƒ‰">ì„œí˜ í°ìƒ‰</option>
            <option value="ì„œí˜ ë¸”ë™">ì„œí˜ ë¸”ë™</option>
            <option value="ë¸”ëœë”©">ë¸”ëœë”©</option>
            <option value="ê³µìº”">ê³µìº”</option>
            <option value="í—¤ë“œë¼ì´íŠ¸ë³µì›ì œ">í—¤ë“œë¼ì´íŠ¸ë³µì›ì œ</option>
            <option value="PPí”„ë¼ì´ë¨¸">PPí”„ë¼ì´ë¨¸</option>
            <option value="ê¸ˆì†í”„ë¼ì´ë¨¸">ê¸ˆì†í”„ë¼ì´ë¨¸</option>
          </select>
        </div>
        <div class="form-group">
          <label for="regular-qty" class="form-label">ìˆ˜ëŸ‰ ì…ë ¥</label>
          <input id="regular-qty" type="number" min="1" value="1" class="form-input" />
        </div>
        <button type="button" class="btn btn-primary order-btn" onclick="addRegularToCart()">ì •ê¸°ì£¼ë¬¸ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
      </div>
      <!-- ìƒ‰ìƒ ì½”ë“œ í’ˆëª© -->
      <div class="order-section">
        <h3>ìƒ‰ìƒ ì½”ë“œ í’ˆëª©</h3>
        <div class="form-group">
          <label for="modal-color-autocomplete" class="form-label">ì½”ë“œ ê²€ìƒ‰</label>
          <div class="autocomplete-wrapper">
            <input id="modal-color-autocomplete" name="color_search" type="text" placeholder="ìƒ‰ìƒ ì½”ë“œ ê²€ìƒ‰"
              autocomplete="off" class="form-input" />
            <ul id="modal-autocomplete-list" class="autocomplete-list" style="display:none;"></ul>
          </div>
        </div>
        <div class="form-group">
          <label for="color-qty" class="form-label">ìˆ˜ëŸ‰ ì…ë ¥</label>
          <input id="color-qty" type="number" min="1" value="1" class="form-input" />
        </div>
        <button type="button" class="btn btn-primary order-btn" onclick="addColorToCart()">ìƒ‰ìƒ ì½”ë“œ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
        <div id="modal-selected-color-info" class="selected-color-info" style="display:none;"></div>
      </div>
      <!-- ì¥ë°”êµ¬ë‹ˆ ì˜ì—­ -->
      <div id="modal-cart-list" style="margin-top: 24px; margin-bottom: 8px"></div>
      <!-- ìš”ì²­ì‚¬í•­ ì…ë ¥ë€ ì¶”ê°€ -->
      <div class="form-group" style="margin-bottom: 16px;">
        <label for="modal-memo-input" style="display:block; margin-bottom:4px; font-weight:500;">ìš”ì²­ì‚¬í•­</label>
        <input type="text" id="modal-memo-input" placeholder="ìš”ì²­ì‚¬í•­ì´ ìˆìœ¼ë©´ ì…ë ¥í•˜ì„¸ìš”"
          style="width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;" />
      </div>
      <div class="modal-buttons" style="display: flex; justify-content: space-between; gap: 8px; margin-top: 20px;">
        <button type="button" onclick="closeProductModal()">ì„ íƒ ì™„ë£Œ</button>
      </div>
    </div>
  </div>

  <!-- âœ… 'ë°°ì†¡ì£¼ì†Œ' UI -->
  <div class="center-box hidden" id="order-step2">
    <div class="card main-form">
      <h2>ë°°ì†¡ ì£¼ì†Œ</h2>
      <form id="address-form" onsubmit="submitOrder(event)">
        <input id="receiver" type="text" placeholder="ìˆ˜ë ¹ì¸" readonly />
        <input id="contact" type="text" placeholder="ì—°ë½ì²˜" readonly />
        <input id="address" type="text" placeholder="ì£¼ì†Œ (ë„ë¡œëª…, ìƒì„¸ì£¼ì†Œ)" required />
        <select id="delivery-method" required>
          <option value="">ë°°ì†¡ ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="íƒë°°">íƒë°°</option>
          <option value="í™”ë¬¼">í™”ë¬¼</option>
          <option value="í€µ">í€µ</option>
          <option value="ë°©ë¬¸ìˆ˜ë ¹">ë°©ë¬¸ìˆ˜ë ¹</option>
        </select>

        <div class="payment-methods">
          <h3>ê²°ì œ ë°©ë²• ì„ íƒ</h3>
          <div class="payment-method">
            <input type="radio" name="payment" value="bank_transfer" id="bank_transfer" required checked />
            <label for="bank_transfer">ê³„ì¢Œì´ì²´</label>
          </div>
        </div>

        <div class="form-group payment-info" id="payment-info-box" style="display: block">
          <div style="font-size: 1.1em; margin-bottom: 6px">ğŸ’° ê²°ì œ ì•ˆë‚´</div>
          <div style="margin-bottom: 6px">
            ì£¼ë¬¸ì´ ì ‘ìˆ˜ ë˜ì—ˆìŠµë‹ˆë‹¤, í™•ì¸ í›„ ì£¼ë¬¸ë‚´ì—­ì„œë¥¼ ë³´ë‚´ ë“œë¦¬ê³  ìˆœì°¨ì ìœ¼ë¡œ ë°œì†¡í•˜ê² ìŠµë‹ˆë‹¤.
          </div>
          <div style="font-size: 1.1em; color: #28a745; font-weight: bold">
            ì´ ê²°ì œ ì˜ˆìƒ ê¸ˆì•¡: <span id="final-price">0ì›</span>
          </div>
        </div>

        <div style="display: flex; justify-content: space-between; gap: 8px">
          <button type="button" onclick="goBackToOrder()">ë’¤ë¡œê°€ê¸°</button>
          <button type="submit">ì£¼ë¬¸ ì œì¶œ</button>
        </div>
      </form>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>